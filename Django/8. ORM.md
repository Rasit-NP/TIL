# ORM
### Object Relational Mapping
- 객체 지향 프로그래밍 언어의 객체와 데이터베이스의 데이터를 매핑하는 기술
- 사용하는 언어가 달라 소통이 불가능한 Django와 데이터베이스 사이에서 언어 번역자 역할을 수행

### Django의 데이터 상호작용
- ORM은 Django 개발자를 위해 'Query Set API'라는 도구를 제공
- QuerySet API는 ORM의 기능을 개발자가 Python 코드 안에서 객체 지향적이고 직관적인 방식으로 데이터베이스를 조작할 수 있도록 제공하는 인터페이스

# QuerySet API
### QuerySet API
- 데이터베이스의 복잡한 SQL 쿼리문을 직관적인 Python 코드로 다룰 수 있게 해줌
- 개발자는 SQL을 직접 작성하지 않고도, `.filter()`, `.exclude()`, `.order_by()` 등 파이썬다운 메서드를 사용하여 원하는 데이터를 손쉽게 생성, 조회, 수정, 삭제할 수 있음
- 코드의 가독성을 높이고, 개발 생산성을 극대화하는 Django ORM의 핵심 기능

### QuerySet API와 ORM의 동작 방식
1. Django -> DB
    - Django(QuerySet API)에서 ORM을 통해 데이터베이스로 정보를 요청할 때
        - SQL 쿼리로 변환되어 데이터베이스로 전달됨
2. DB -> Django
    - 데이터베이스가 요청에 대한 응답을 보낼 때
        - ORM은 이 SQL 결과를 다시 파이썬이 이해할 수 있는 Python Object
        - QuerySet 또는 Instance 형태로 변환하여 Django로 반환

### QuerySet API 구문 기본 구조
```python
Article.objects.all()
```
- `Atricle` (모델 클래스)
    - 데이터베이스 테이블에 대한 Python 클래스 표현
    - articles_article 테이블의 스키마를 정의하며, Django ORM이 데이터베이스와 상호작용할 때 사용하는 기본적인 구조체
- `.objects` (매니저, manager)
    - 데이터베이스 조회(Query) 작업을 위한 기본 인터페이스
    - 모델 클래스가 데이터베이스 쿼리 작업을 수행할 수 있도록 하는 진입점
    - Django는 모든 모델에 objects라는 이름의 매니저를 자동으로 추가하며, 이 매니저를 통해 `.all()`, `.filter()` 등의 쿼리 메서드를 호출
- `.all()` (QuerySet API 메서드)
    - 특정 데이터베이스 작업을 수행하는 명령
    - 매니저를 통해 호출되는 메서드로, 해당 모델과 연결된 테이블의 모든 레코드를 조회하라는 SQL 쿼리를 생성하고 실행

### Query
- 데이터베이스에 특정한 데이터를 보여 달라는 요청
- Django에서 Query가 처리되는 과정
    - Python 코드 -> ORM
        - 개발자의 QuerySet API가 ORM으로 전달
    - ORM -> SQL 변환
        - ORM이 이를 데이터베이스 용 SQL Query로 변환하여 데이터베이스에 전달
    - DB 응답 -> ORM
        - 데이터베이스가 SQL 쿼리를 처리하고 결과 데이터를 ORM에 반환
    - ORM -> QuerySet 변환
        - ORM이 데이터베이스의 결과를 QuerySet 형태로 변환하여 전달

### QuerySet
- 데이터베이스에서 전달받은 객체 목록
- 순회 가능한 데이터로 1개 이상 데이터를 불러와 사용 가능
- Django ORM을 통해 만들어진 자료형
- 단, 데이터베이스가 단일 객체를 반환할 때는 QuerySet이 아닌 모델(Class)의 인스턴스로 반환됨