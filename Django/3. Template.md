# Template
## Django Template System
> 파이썬 데이터(context)를 HTML 문서(Template)와 결함하여, 로직과 표현을 분리한 채 동적인 웹 페이지를 생성하는 도구

### HTML의 콘텐츠를 변수 값에 따라 변경하기
- context['name']이 변경되면 응답 받은 HTML의 모습도 변경됨
```python
def index(request):
    contex = {
        'name': 'Jane',
    }
    return render(request, 'articles/index.html', context)
```
```HTML
<!-- articles/index.html -->

<body>
    <h1>Hello, {{ name }}!<h1>
</body>
```

### Django Template system의 목적
- '페이지 틀'에 '데이터'를 동적으로 결합하여 수많은 페이지를 효율적으로 만들어 내기 위함

## Django Template Language
### DTL
> Template에서 조건, 반복, 변수 등의 프로그래밍적 기능을 제공하는 시스템

### DTL Syntax
1. Variable
2. Filters
3. Tags
4. Comments

### Variable
```python
context = {
    'variable_1': 'value_1',
    'variable_2': {
        'attribute': 'value_2',
    },
}
```
```HTML
{{ variable_1 }}
{{ variable_2.attribute }}
```
- Django Template에서의 변수
- render 함수의 세 번째 인자로 딕셔너리 타입으로 전달됨
- 해당 딕셔너리 key에 해당하는 문자열이 template에서 사용 가능한 변수명이 됨
- dot('.')을 사용하여 변수 속성에 접근할 수 있음

### Filters
```HTML
{{ variable|filter }}
{{ name|truncatewords:30 }}
```
- 표시할 변수를 수정할 때 사용(변수 + '|' + 필터)
- chained(연결)이 가능하며 일부 필터는 인자를 받기도 함
- 약 60개의 built-in template filters를 제공

### Tags
- 반복 또는 논리를 수행하여 제어 흐름을 만듦
- 일부 태그는 시작과 종료 태그가 필요
- 약 24개의 built-in template tags를 제공
- if, else, endif 태그
    ```python
    context = {
        'login': False,
    }
    ```
    ```HTML
    {% if login %}
        <h1>Hello, User!!!</h1>
    {% else %}
        <h1>Please, login.</h1>
    {% endif %}
    ```
- for 태그
    ```python
    context = {
        'nums': [1, 2, 3],
    }
    ```
    ```HTML
    <ul>
        {% for num in nums %}
            <li>{{ num }}</li>
        {% endfor %}
    </ul>
    ```

### Comments
- inline
    ```HTML
    <h1>Hello, {# name #}</h1>
    ```
- multiline
    ```
    {% comment %}
    ...
    {% endcomment %}
    ```
# Template 상속
> 여러 템플릿이 공통 요소를 공유할 수 있게 해주는 기능
### 상속 구조 만들기
- skeleton 역할을 하게 되는 상위 템플릿(base.html) 작성
    ```HTML
    <!-- articles/base.html -->

    <body>
        {% block content %}
        {% endblock content %}
    </body>
    ```
    - 모든 템플릿이 공유했으면 좋겠는 공통 요소를 작성
    - 템플릿 별로 재정의할 부분은 block 태그를 활용
- 기존 하위 템플릿들이 상위 템플릿을 상속받도록 변경
    ```HTML
    {% extends 'articles/base.html' %}
    {% block content %}
        <h1>Hello, {{ name }} </h1>
    {% endblock content %}
    ```
    ```HTML
    <!-- articles/dinner.html -->

    {%extends 'articles/base.html' %}
    {% block content %}
    .
    .
    .
    {% endblock content %}
    ```
    - extends 태그로 상속받을 템플릿 결정
        - extends 태그는 파일의 맨 위에 작성
    - block 태그를 활용해 base.html의 같은 이름으로 작성된 block 태그의 내용을 대체

### 상속 관련 DTL 태그
- `extends`
    ```HTML
    {% extends 'articles/base.html' %}
    ```
    - 하위 템플릿이 부모 템플릿을 확장한다는 것을 알림
    - 반드시 자식 템플릿 최상단에 작성되어야 함
    - extends 태그는 2개 이상 사용 불가능
- `block`
    ```HTML
    {% block content %}
    {% endblock contet %}
    ```
    - 하위 템플릿에서 재정의 할 수 있는 블록을 정의
    - 상위 템플릿에서 작성하며 하위 템플릿이 작성할 수 있는 공간을 지정하는 것